define(['jquery'], function($) {

    return {
        acoes: function($course_id, $pagina, $url) {
            var hmtl_carregando = '<h1 style="text-align:center; margin-top:25%;"><i class="fa fa-spinner fa-spin"></i></h1>';
            //Requisicao para obert informacoes pelo menu
            function requisicao($url, $pagina, $local) {
                $.ajax({
                    type: "POST",
                    url: $url + $local,
                    data: {
                        "id": $course_id,
                        "pagina": $pagina
                    }
                }).fail(function() {
                    var msg = '<div class="mb-3 mt-3"><div class="alert alert-danger mb-0" role="alert">ERRO: Não foi possivel obter os dados</div></div>'
                    $(".conteudo_panel .container").html(msg);
                }).done(function(data) {
                    $(".conteudo_panel .container").html(data);
                })
            }
            //Requisicao para listar as notas
            function requisicao_notas($url, $local, $acao = 1) {
                $.ajax({
                    type: "GET",
                    url: $url + $local,
                    data: {
                        "id": $course_id,
                        "acao": $acao
                    }
                }).fail(function() {
                    var msg = '<div class="mb-3 mt-3"><div class="alert alert-danger mb-0" role="alert">ERRO: Não foi possivel obter os dados</div></div>'
                    $(".conteudo_panel .container").html(msg);
                }).done(function(data) {
                    $(".conteudo_panel .container").html(data);
                })
            }
            //Acoes do menu
            $(function() {
                $("#navegacao").click(function() {
                    $(".conteudo_panel .container-fluid h4").text("Navegação");
                    $(".conteudo_panel .container").html(hmtl_carregando);
                    requisicao($url, $pagina, '/theme/colors/cursos_menu_lateral/get_course_sections.php');
                });
                $("#outros_alunos").click(function() {
                    $(".conteudo_panel .container-fluid h4").text("Outros alunos");
                    $(".conteudo_panel .container").html(hmtl_carregando);
                    requisicao($url, $pagina, '/theme/colors/cursos_menu_lateral/get_alunos_online_desempenho.php');
                });
                $("#biblioteca_arquivos").click(function() {
                    $(".conteudo_panel .container-fluid h4").text("Biblioteca de arquivos");
                    $(".conteudo_panel .container").html(hmtl_carregando);
                    requisicao($url, $pagina, '/theme/colors/cursos_menu_lateral/get_bibliotecas_folders.php');
                });
                $("#m_anotacoes").click(function() {
                    $(".conteudo_panel .container-fluid h4").text("Minhas anotações");
                    $(".conteudo_panel .container").html(hmtl_carregando);
                    requisicao_notas($url, '/theme/colors/cursos_menu_lateral/notas/get_notas.php', 1);
                });
                $("#m_progresso").click(function() {
                    $(".conteudo_panel .container-fluid h4").text("Meu progresso")
                    $(".conteudo_panel .container").html(hmtl_carregando);
                    requisicao($url, $pagina, '/theme/colors/cursos_menu_lateral/get_courses.php');
                });
            });
        }
    };
});